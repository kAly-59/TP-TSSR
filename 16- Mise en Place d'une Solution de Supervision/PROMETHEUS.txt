**Instructions pour Déployer et Configurer Prometheus en tant que Service de Surveillance**

1. **Téléchargement de Prometheus :**
   - Rendez-vous sur la page de téléchargement de Prometheus et notez la version la plus récente, ainsi que la version LTS indiquée.
   - Utilisez la commande wget pour télécharger Prometheus sur le serveur de surveillance. Remplacez `[release]` par la version notée précédemment dans le lien de téléchargement. Par exemple :
     ```bash
     wget https://github.com/prometheus/prometheus/releases/download/v[release]/prometheus-[release].linux-amd64.tar.gz
     ```

2. **Extraction des Fichiers :**
   - Utilisez la commande `tar` pour extraire les fichiers de l'archive téléchargée :
     ```bash
     tar xvfz prometheus-*.tar.gz
     ```

3. **Création des Répertoires :**
   - Créez deux nouveaux répertoires, `/etc/prometheus` et `/var/lib/prometheus`, pour stocker les fichiers de configuration et les données de l'application :
     ```bash
     sudo mkdir /etc/prometheus /var/lib/prometheus
     ```

4. **Déplacement des Fichiers :**
   - Déplacez les binaires Prometheus (`prometheus` et `promtool`) dans le répertoire `/usr/local/bin` pour les rendre accessibles à tous les utilisateurs :
     ```bash
     sudo mv prometheus promtool /usr/local/bin/
     ```

5. **Déplacement du Fichier de Configuration :**
   - Déplacez le fichier de configuration YAML de Prometheus (`prometheus.yml`) dans le répertoire `/etc/prometheus` :
     ```bash
     sudo mv prometheus.yml /etc/prometheus/prometheus.yml
     ```

6. **Déplacement des Ressources pour les Consoles Personnalisées :**
   - Déplacez les répertoires `consoles` et `console_libraries` dans le répertoire `/etc/prometheus` :
     ```bash
     sudo mv consoles/ console_libraries/ /etc/prometheus/
     ```

7. **Configuration du Service systemd :**
   - Créez et ouvrez un fichier de service systemd pour Prometheus en utilisant votre éditeur de texte préféré :
     ```bash
     sudo vi /etc/systemd/system/prometheus.service
     ```
   - Copiez-collez le contenu fourni dans les instructions pour définir les paramètres du service.

8. **Rechargement du Démon systemctl :**
   - Rechargez le démon systemctl pour prendre en compte les modifications apportées au fichier de service :
     ```bash
     sudo systemctl daemon-reload
     ```

9. **Activation et Démarrage du Service :**
   - Activez le service Prometheus pour qu'il démarre automatiquement au démarrage du système :
     ```bash
     sudo systemctl enable prometheus
     ```
   - Démarrez le service Prometheus :
     ```bash
     sudo systemctl start prometheus
     ```

10. **Vérification du Statut du Service :**
    - Vérifiez le statut du service Prometheus pour vous assurer qu'il fonctionne correctement :
      ```bash
      sudo systemctl status prometheus
      ```

11. **Accès à l'Interface Web de Prometheus :**
    - Accédez à l'interface web de Prometheus dans votre navigateur en utilisant l'URL http://<adresse_ip_locale>:9090. Remplacez `<adresse_ip_locale>` par l'adresse IP de votre serveur de surveillance.

12. **Vérification des Cibles de Surveillance :**
    - Dans l'interface web de Prometheus, cliquez sur "Status" puis sur "Targets" pour lister toutes les cibles surveillées.
    - Vous devriez voir le service Prometheus local comme seule cible surveillée, conformément à la directive par défaut dans le fichier `prometheus.yml`.

---